<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>TweakAI Video Generator</title>
<style>
    body { font-family: Arial; padding: 20px; }
    #video { margin-top: 20px; width: 100%; max-width: 720px; }
</style>
</head>
<body>

<h2>TweakAI – Text‑to‑Video</h2>

<textarea id="prompt" rows="4" style="width:100%;" placeholder="Beschreibe dein Video..."></textarea>
<br><br>
<button onclick="generate()">Video generieren</button>

<p id="status"></p>
<video id="video" controls></video>

<script>
async function generate() {
    const prompt = document.getElementById("prompt").value;
    document.getElementById("status").innerText = "Sende Anfrage...";

    // 1. Video-Generierung starten
    const start = await fetch("https://api.tweakai.net/api/video/generate", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            prompt: prompt,
            model: "veo-3",
            duration: 8,
            resolution: "1280x720"
        })
    });

    const startJson = await start.json();
    const taskId = startJson.task_id;

    document.getElementById("status").innerText = "Task gestartet: " + taskId;

    // 2. Task pollen, bis Video fertig ist
    let videoUrl = null;

    while (!videoUrl) {
        await new Promise(r => setTimeout(r, 3000));

        const check = await fetch(`https://api.tweakai.net/api/video/task/${taskId}`);
        const checkJson = await check.json();

        if (checkJson.status === "completed") {
            videoUrl = checkJson.video_url;
        } else {
            document.getElementById("status").innerText = "Warte auf Video...";
        }
    }

    // 3. Video anzeigen
    document.getElementById("status").innerText = "Video fertig!";
    document.getElementById("video").src = videoUrl;
}
</script>

</body>
</html>
